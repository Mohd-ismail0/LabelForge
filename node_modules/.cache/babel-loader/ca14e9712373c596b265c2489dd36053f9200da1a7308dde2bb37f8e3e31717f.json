{"ast":null,"code":"var _jsxFileName = \"/workspace/src/components/Generation.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { useApp } from '../context/AppContext';\nimport { renderLabel, LABEL_SIZES } from '../utils/labelRenderer';\nimport jsPDF from 'jspdf';\nimport JSZip from 'jszip';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Generation = () => {\n  _s();\n  const {\n    state,\n    actions\n  } = useApp();\n  const {\n    excelData,\n    mappedColumns,\n    labelSettings,\n    quantitySettings\n  } = state;\n  const [generationProgress, setGenerationProgress] = useState(0);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [showPageSizeSelection, setShowPageSizeSelection] = useState(false);\n  const [pageSize, setPageSize] = useState('a4');\n\n  // Use shared LABEL_SIZES from utils\n\n  const PAGE_SIZES = {\n    a4: {\n      width: 210,\n      height: 297,\n      unit: 'mm'\n    },\n    letter: {\n      width: 216,\n      height: 279,\n      unit: 'mm'\n    },\n    legal: {\n      width: 216,\n      height: 356,\n      unit: 'mm'\n    }\n  };\n  const calculateSummary = () => {\n    if (!excelData) return {\n      products: 0,\n      labels: 0,\n      size: '',\n      barcodeType: ''\n    };\n    const products = excelData.rows.length;\n    let totalLabels = 0;\n    if (quantitySettings.type === 'column' && mappedColumns.quantity) {\n      const quantityColumnIndex = excelData.columnHeaders.indexOf(mappedColumns.quantity);\n      totalLabels = excelData.rows.reduce((sum, row) => {\n        const qty = parseInt(row[quantityColumnIndex]) || 1;\n        return sum + qty;\n      }, 0);\n    } else if (quantitySettings.type === 'fixed') {\n      totalLabels = products * quantitySettings.fixedQuantity;\n    } else if (quantitySettings.type === 'manual') {\n      totalLabels = Object.values(quantitySettings.manualQuantities).reduce((sum, qty) => sum + qty, 0);\n    }\n    const currentSize = LABEL_SIZES[labelSettings.size] || LABEL_SIZES['2x1'];\n    const size = labelSettings.size === 'custom' ? {\n      width: labelSettings.customWidth,\n      height: labelSettings.customHeight\n    } : currentSize;\n    const sizeText = `${size.width}\" x ${size.height}\"`;\n    return {\n      products,\n      labels: totalLabels,\n      size: sizeText,\n      barcodeType: labelSettings.barcodeType\n    };\n  };\n  const summary = calculateSummary();\n  const generateLabels = async () => {\n    if (!excelData || !mappedColumns.barcode) {\n      actions.setError('Missing required data for label generation');\n      return;\n    }\n    setIsGenerating(true);\n    setGenerationProgress(0);\n    try {\n      const labels = [];\n      const barcodeColumnIndex = excelData.columnHeaders.indexOf(mappedColumns.barcode);\n      const textColumns = mappedColumns.text.map(col => excelData.columnHeaders.indexOf(col)).filter(index => index !== -1);\n      let processedCount = 0;\n      const totalRows = excelData.rows.length;\n      for (let rowIndex = 0; rowIndex < excelData.rows.length; rowIndex++) {\n        const row = excelData.rows[rowIndex];\n        const barcode = row[barcodeColumnIndex];\n        if (!barcode) continue;\n\n        // Get quantity for this row\n        let quantity = 1;\n        if (quantitySettings.type === 'column' && mappedColumns.quantity) {\n          const quantityColumnIndex = excelData.columnHeaders.indexOf(mappedColumns.quantity);\n          quantity = parseInt(row[quantityColumnIndex]) || 1;\n        } else if (quantitySettings.type === 'fixed') {\n          quantity = quantitySettings.fixedQuantity;\n        } else if (quantitySettings.type === 'manual') {\n          quantity = quantitySettings.manualQuantities[rowIndex] || 1;\n        }\n\n        // Get text content\n        const textContent = textColumns.map(colIndex => row[colIndex]).filter(val => val).join(' - ');\n\n        // Generate labels for this product\n        for (let i = 0; i < quantity; i++) {\n          const labelData = {\n            barcode,\n            text: textContent,\n            productIndex: rowIndex,\n            labelIndex: i\n          };\n          labels.push(labelData);\n        }\n        processedCount++;\n        setGenerationProgress(processedCount / totalRows * 100);\n      }\n      actions.setGeneratedLabels(labels);\n      setGenerationProgress(100);\n    } catch (error) {\n      actions.setError('Error generating labels: ' + error.message);\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n  const downloadZIP = async () => {\n    if (!state.generatedLabels.length) {\n      actions.setError('No labels generated yet');\n      return;\n    }\n    try {\n      actions.setLoading(true);\n      const zip = new JSZip();\n      const currentSize = LABEL_SIZES[labelSettings.size];\n      for (let i = 0; i < state.generatedLabels.length; i++) {\n        const label = state.generatedLabels[i];\n\n        // Create canvas for barcode\n        const canvas = document.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n\n        // Set canvas size based on label size\n        const dpi = currentSize.dpi;\n        const width = currentSize.width * dpi;\n        const height = currentSize.height * dpi;\n        canvas.width = width;\n        canvas.height = height;\n\n        // Fill background\n        ctx.fillStyle = 'white';\n        ctx.fillRect(0, 0, width, height);\n\n        // Generate barcode\n        const barcodeCanvas = document.createElement('canvas');\n        JsBarcode(barcodeCanvas, label.barcode, {\n          format: labelSettings.barcodeType,\n          width: 2,\n          height: height * 0.6,\n          displayValue: true,\n          fontSize: 12,\n          margin: 10\n        });\n\n        // Draw barcode\n        const barcodeX = (width - barcodeCanvas.width) / 2;\n        const barcodeY = height * 0.1;\n        ctx.drawImage(barcodeCanvas, barcodeX, barcodeY);\n\n        // Draw text if available\n        if (label.text) {\n          ctx.fillStyle = 'black';\n          ctx.font = '16px Arial';\n          ctx.textAlign = 'center';\n          const textY = height * 0.8;\n          ctx.fillText(label.text, width / 2, textY);\n        }\n\n        // Convert to blob and add to zip\n        const blob = await new Promise(resolve => canvas.toBlob(resolve, 'image/png'));\n        zip.file(`label_${label.productIndex + 1}_${label.labelIndex + 1}.png`, blob);\n      }\n      const zipBlob = await zip.generateAsync({\n        type: 'blob'\n      });\n      const url = URL.createObjectURL(zipBlob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'barcode_labels.zip';\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n    } catch (error) {\n      actions.setError('Error creating ZIP file: ' + error.message);\n    } finally {\n      actions.setLoading(false);\n    }\n  };\n  const downloadPDF = async () => {\n    if (!state.generatedLabels.length) {\n      actions.setError('No labels generated yet');\n      return;\n    }\n    try {\n      actions.setLoading(true);\n      const pdf = new jsPDF({\n        orientation: 'portrait',\n        unit: 'mm',\n        format: pageSize\n      });\n      const currentSize = LABEL_SIZES[labelSettings.size];\n      const pageSizeInfo = PAGE_SIZES[pageSize];\n\n      // Calculate labels per page\n      const labelWidthMM = currentSize.width * 25.4; // Convert inches to mm\n      const labelHeightMM = currentSize.height * 25.4;\n      const margin = 10; // 10mm margin\n\n      const labelsPerRow = Math.floor((pageSizeInfo.width - 2 * margin) / labelWidthMM);\n      const labelsPerColumn = Math.floor((pageSizeInfo.height - 2 * margin) / labelHeightMM);\n      const labelsPerPage = labelsPerRow * labelsPerColumn;\n      let currentPage = 0;\n      let currentRow = 0;\n      let currentCol = 0;\n      for (let i = 0; i < state.generatedLabels.length; i++) {\n        const label = state.generatedLabels[i];\n        if (i > 0 && i % labelsPerPage === 0) {\n          pdf.addPage();\n          currentPage++;\n          currentRow = 0;\n          currentCol = 0;\n        }\n\n        // Calculate position\n        const x = margin + currentCol * labelWidthMM;\n        const y = margin + currentRow * labelHeightMM;\n\n        // Create canvas for this label\n        const canvas = document.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n        const dpi = 300;\n        const width = currentSize.width * dpi;\n        const height = currentSize.height * dpi;\n        canvas.width = width;\n        canvas.height = height;\n\n        // Fill background\n        ctx.fillStyle = 'white';\n        ctx.fillRect(0, 0, width, height);\n\n        // Generate barcode\n        const barcodeCanvas = document.createElement('canvas');\n        JsBarcode(barcodeCanvas, label.barcode, {\n          format: labelSettings.barcodeType,\n          width: 2,\n          height: height * 0.6,\n          displayValue: true,\n          fontSize: 12,\n          margin: 10\n        });\n\n        // Draw barcode\n        const barcodeX = (width - barcodeCanvas.width) / 2;\n        const barcodeY = height * 0.1;\n        ctx.drawImage(barcodeCanvas, barcodeX, barcodeY);\n\n        // Draw text if available\n        if (label.text) {\n          ctx.fillStyle = 'black';\n          ctx.font = '16px Arial';\n          ctx.textAlign = 'center';\n          const textY = height * 0.8;\n          ctx.fillText(label.text, width / 2, textY);\n        }\n\n        // Convert canvas to image and add to PDF\n        const imgData = canvas.toDataURL('image/png');\n        pdf.addImage(imgData, 'PNG', x, y, labelWidthMM, labelHeightMM);\n\n        // Update position\n        currentCol++;\n        if (currentCol >= labelsPerRow) {\n          currentCol = 0;\n          currentRow++;\n        }\n      }\n      pdf.save('barcode_labels.pdf');\n    } catch (error) {\n      actions.setError('Error creating PDF: ' + error.message);\n    } finally {\n      actions.setLoading(false);\n    }\n  };\n  const handlePrevious = () => {\n    actions.setStep(4);\n  };\n  const handleStartOver = () => {\n    actions.resetApp();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Step 5: Generate & Export Labels\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"card-description\",\n        children: \"Generate your labels and download in your preferred format\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 312,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card-body\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"generation-summary\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"summary-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            children: \"Final Summary\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"summary-grid\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"summary-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"summary-label\",\n                children: \"File:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 322,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"summary-value\",\n                children: (excelData === null || excelData === void 0 ? void 0 : excelData.fileName) || '-'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"summary-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"summary-label\",\n                children: \"Products:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 326,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"summary-value\",\n                children: summary.products\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 327,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"summary-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"summary-label\",\n                children: \"Total Labels:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 330,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"summary-value\",\n                children: summary.labels\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 331,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"summary-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"summary-label\",\n                children: \"Label Size:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"summary-value\",\n                children: summary.size\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 333,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"summary-item\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"summary-label\",\n                children: \"Barcode Type:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 338,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"summary-value\",\n                children: summary.barcodeType\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 339,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 317,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"generation-actions\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-primary btn-large\",\n          onClick: generateLabels,\n          disabled: isGenerating,\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"btn-icon\",\n            children: \"\\uD83D\\uDE80\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 13\n          }, this), \"Generate All Labels\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 9\n      }, this), isGenerating && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"generation-progress\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-container\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"progress-bar\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"progress-fill\",\n              style: {\n                width: `${generationProgress}%`\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 360,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"Generating labels... \", Math.round(generationProgress), \"%\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 11\n      }, this), state.generatedLabels.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"download-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"Download Your Labels\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 13\n        }, this), showPageSizeSelection && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"page-size-selection\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            children: \"Select Page Size for PDF\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"page-size-options\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"option-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                id: \"page-a4\",\n                name: \"page-size\",\n                value: \"a4\",\n                checked: pageSize === 'a4',\n                onChange: e => setPageSize(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 379,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"page-a4\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"option-title\",\n                  children: \"A4 (210 \\xD7 297 mm)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 388,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"option-description\",\n                  children: \"Standard international size\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 389,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"option-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                id: \"page-letter\",\n                name: \"page-size\",\n                value: \"letter\",\n                checked: pageSize === 'letter',\n                onChange: e => setPageSize(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 393,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"page-letter\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"option-title\",\n                  children: \"Letter (8.5 \\xD7 11 in)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 402,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"option-description\",\n                  children: \"Standard US size\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 403,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 401,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"option-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"radio\",\n                id: \"page-legal\",\n                name: \"page-size\",\n                value: \"legal\",\n                checked: pageSize === 'legal',\n                onChange: e => setPageSize(e.target.value)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 407,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"page-legal\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"option-title\",\n                  children: \"Legal (8.5 \\xD7 14 in)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 416,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"option-description\",\n                  children: \"Extended length\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 417,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 415,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 406,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 377,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"download-options\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary btn-large\",\n            onClick: downloadZIP,\n            disabled: state.loading,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"btn-icon\",\n              children: \"\\uD83D\\uDCE6\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 430,\n              columnNumber: 17\n            }, this), \"Download ZIP\", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"btn-description\",\n              children: \"Individual label images\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-secondary btn-large\",\n            onClick: () => {\n              setShowPageSizeSelection(!showPageSizeSelection);\n              if (!showPageSizeSelection) {\n                setTimeout(downloadPDF, 100);\n              }\n            },\n            disabled: state.loading,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"btn-icon\",\n              children: \"\\uD83D\\uDCC4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 17\n            }, this), \"Download PDF\", /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"btn-description\",\n              children: \"Print-ready labels in PDF format\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"download-info\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"ZIP Format:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 450,\n              columnNumber: 18\n            }, this), \" Contains individual high-resolution label images for custom printing or integration.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"PDF Format:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 18\n            }, this), \" Optimized for printing with proper margins and cut lines. Compatible with Avery label sheets.\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 371,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"step-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-outline\",\n          onClick: handlePrevious,\n          children: \"Previous\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn btn-secondary\",\n          onClick: handleStartOver,\n          children: \"Start Over\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 460,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 309,\n    columnNumber: 5\n  }, this);\n};\n_s(Generation, \"B16FfXjsJFtbd6wXgy+F5QSJdsE=\", false, function () {\n  return [useApp];\n});\n_c = Generation;\nexport default Generation;\nvar _c;\n$RefreshReg$(_c, \"Generation\");","map":{"version":3,"names":["React","useState","useEffect","useApp","renderLabel","LABEL_SIZES","jsPDF","JSZip","jsxDEV","_jsxDEV","Generation","_s","state","actions","excelData","mappedColumns","labelSettings","quantitySettings","generationProgress","setGenerationProgress","isGenerating","setIsGenerating","showPageSizeSelection","setShowPageSizeSelection","pageSize","setPageSize","PAGE_SIZES","a4","width","height","unit","letter","legal","calculateSummary","products","labels","size","barcodeType","rows","length","totalLabels","type","quantity","quantityColumnIndex","columnHeaders","indexOf","reduce","sum","row","qty","parseInt","fixedQuantity","Object","values","manualQuantities","currentSize","customWidth","customHeight","sizeText","summary","generateLabels","barcode","setError","barcodeColumnIndex","textColumns","text","map","col","filter","index","processedCount","totalRows","rowIndex","textContent","colIndex","val","join","i","labelData","productIndex","labelIndex","push","setGeneratedLabels","error","message","downloadZIP","generatedLabels","setLoading","zip","label","canvas","document","createElement","ctx","getContext","dpi","fillStyle","fillRect","barcodeCanvas","JsBarcode","format","displayValue","fontSize","margin","barcodeX","barcodeY","drawImage","font","textAlign","textY","fillText","blob","Promise","resolve","toBlob","file","zipBlob","generateAsync","url","URL","createObjectURL","a","href","download","body","appendChild","click","removeChild","revokeObjectURL","downloadPDF","pdf","orientation","pageSizeInfo","labelWidthMM","labelHeightMM","labelsPerRow","Math","floor","labelsPerColumn","labelsPerPage","currentPage","currentRow","currentCol","addPage","x","y","imgData","toDataURL","addImage","save","handlePrevious","setStep","handleStartOver","resetApp","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","disabled","style","round","id","name","value","checked","onChange","e","target","htmlFor","loading","setTimeout","_c","$RefreshReg$"],"sources":["/workspace/src/components/Generation.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useApp } from '../context/AppContext';\nimport { renderLabel, LABEL_SIZES } from '../utils/labelRenderer';\nimport jsPDF from 'jspdf';\nimport JSZip from 'jszip';\n\nconst Generation = () => {\n  const { state, actions } = useApp();\n  const { excelData, mappedColumns, labelSettings, quantitySettings } = state;\n  const [generationProgress, setGenerationProgress] = useState(0);\n  const [isGenerating, setIsGenerating] = useState(false);\n  const [showPageSizeSelection, setShowPageSizeSelection] = useState(false);\n  const [pageSize, setPageSize] = useState('a4');\n\n  // Use shared LABEL_SIZES from utils\n\n  const PAGE_SIZES = {\n    a4: { width: 210, height: 297, unit: 'mm' },\n    letter: { width: 216, height: 279, unit: 'mm' },\n    legal: { width: 216, height: 356, unit: 'mm' }\n  };\n\n  const calculateSummary = () => {\n    if (!excelData) return { products: 0, labels: 0, size: '', barcodeType: '' };\n\n    const products = excelData.rows.length;\n    let totalLabels = 0;\n\n    if (quantitySettings.type === 'column' && mappedColumns.quantity) {\n      const quantityColumnIndex = excelData.columnHeaders.indexOf(mappedColumns.quantity);\n      totalLabels = excelData.rows.reduce((sum, row) => {\n        const qty = parseInt(row[quantityColumnIndex]) || 1;\n        return sum + qty;\n      }, 0);\n    } else if (quantitySettings.type === 'fixed') {\n      totalLabels = products * quantitySettings.fixedQuantity;\n    } else if (quantitySettings.type === 'manual') {\n      totalLabels = Object.values(quantitySettings.manualQuantities).reduce((sum, qty) => sum + qty, 0);\n    }\n\n    const currentSize = LABEL_SIZES[labelSettings.size] || LABEL_SIZES['2x1'];\n    const size = labelSettings.size === 'custom' \n      ? { width: labelSettings.customWidth, height: labelSettings.customHeight }\n      : currentSize;\n    const sizeText = `${size.width}\" x ${size.height}\"`;\n\n    return {\n      products,\n      labels: totalLabels,\n      size: sizeText,\n      barcodeType: labelSettings.barcodeType\n    };\n  };\n\n  const summary = calculateSummary();\n\n  const generateLabels = async () => {\n    if (!excelData || !mappedColumns.barcode) {\n      actions.setError('Missing required data for label generation');\n      return;\n    }\n\n    setIsGenerating(true);\n    setGenerationProgress(0);\n\n    try {\n      const labels = [];\n      const barcodeColumnIndex = excelData.columnHeaders.indexOf(mappedColumns.barcode);\n      const textColumns = mappedColumns.text.map(col => \n        excelData.columnHeaders.indexOf(col)\n      ).filter(index => index !== -1);\n\n      let processedCount = 0;\n      const totalRows = excelData.rows.length;\n\n      for (let rowIndex = 0; rowIndex < excelData.rows.length; rowIndex++) {\n        const row = excelData.rows[rowIndex];\n        const barcode = row[barcodeColumnIndex];\n        \n        if (!barcode) continue;\n\n        // Get quantity for this row\n        let quantity = 1;\n        if (quantitySettings.type === 'column' && mappedColumns.quantity) {\n          const quantityColumnIndex = excelData.columnHeaders.indexOf(mappedColumns.quantity);\n          quantity = parseInt(row[quantityColumnIndex]) || 1;\n        } else if (quantitySettings.type === 'fixed') {\n          quantity = quantitySettings.fixedQuantity;\n        } else if (quantitySettings.type === 'manual') {\n          quantity = quantitySettings.manualQuantities[rowIndex] || 1;\n        }\n\n        // Get text content\n        const textContent = textColumns.map(colIndex => row[colIndex]).filter(val => val).join(' - ');\n\n        // Generate labels for this product\n        for (let i = 0; i < quantity; i++) {\n          const labelData = {\n            barcode,\n            text: textContent,\n            productIndex: rowIndex,\n            labelIndex: i\n          };\n          labels.push(labelData);\n        }\n\n        processedCount++;\n        setGenerationProgress((processedCount / totalRows) * 100);\n      }\n\n      actions.setGeneratedLabels(labels);\n      setGenerationProgress(100);\n    } catch (error) {\n      actions.setError('Error generating labels: ' + error.message);\n    } finally {\n      setIsGenerating(false);\n    }\n  };\n\n  const downloadZIP = async () => {\n    if (!state.generatedLabels.length) {\n      actions.setError('No labels generated yet');\n      return;\n    }\n\n    try {\n      actions.setLoading(true);\n      const zip = new JSZip();\n      const currentSize = LABEL_SIZES[labelSettings.size];\n\n      for (let i = 0; i < state.generatedLabels.length; i++) {\n        const label = state.generatedLabels[i];\n        \n        // Create canvas for barcode\n        const canvas = document.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n        \n        // Set canvas size based on label size\n        const dpi = currentSize.dpi;\n        const width = currentSize.width * dpi;\n        const height = currentSize.height * dpi;\n        \n        canvas.width = width;\n        canvas.height = height;\n        \n        // Fill background\n        ctx.fillStyle = 'white';\n        ctx.fillRect(0, 0, width, height);\n        \n        // Generate barcode\n        const barcodeCanvas = document.createElement('canvas');\n        JsBarcode(barcodeCanvas, label.barcode, {\n          format: labelSettings.barcodeType,\n          width: 2,\n          height: height * 0.6,\n          displayValue: true,\n          fontSize: 12,\n          margin: 10\n        });\n        \n        // Draw barcode\n        const barcodeX = (width - barcodeCanvas.width) / 2;\n        const barcodeY = height * 0.1;\n        ctx.drawImage(barcodeCanvas, barcodeX, barcodeY);\n        \n        // Draw text if available\n        if (label.text) {\n          ctx.fillStyle = 'black';\n          ctx.font = '16px Arial';\n          ctx.textAlign = 'center';\n          const textY = height * 0.8;\n          ctx.fillText(label.text, width / 2, textY);\n        }\n        \n        // Convert to blob and add to zip\n        const blob = await new Promise(resolve => canvas.toBlob(resolve, 'image/png'));\n        zip.file(`label_${label.productIndex + 1}_${label.labelIndex + 1}.png`, blob);\n      }\n\n      const zipBlob = await zip.generateAsync({ type: 'blob' });\n      const url = URL.createObjectURL(zipBlob);\n      const a = document.createElement('a');\n      a.href = url;\n      a.download = 'barcode_labels.zip';\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n    } catch (error) {\n      actions.setError('Error creating ZIP file: ' + error.message);\n    } finally {\n      actions.setLoading(false);\n    }\n  };\n\n  const downloadPDF = async () => {\n    if (!state.generatedLabels.length) {\n      actions.setError('No labels generated yet');\n      return;\n    }\n\n    try {\n      actions.setLoading(true);\n      const pdf = new jsPDF({\n        orientation: 'portrait',\n        unit: 'mm',\n        format: pageSize\n      });\n\n      const currentSize = LABEL_SIZES[labelSettings.size];\n      const pageSizeInfo = PAGE_SIZES[pageSize];\n      \n      // Calculate labels per page\n      const labelWidthMM = currentSize.width * 25.4; // Convert inches to mm\n      const labelHeightMM = currentSize.height * 25.4;\n      const margin = 10; // 10mm margin\n      \n      const labelsPerRow = Math.floor((pageSizeInfo.width - 2 * margin) / labelWidthMM);\n      const labelsPerColumn = Math.floor((pageSizeInfo.height - 2 * margin) / labelHeightMM);\n      const labelsPerPage = labelsPerRow * labelsPerColumn;\n\n      let currentPage = 0;\n      let currentRow = 0;\n      let currentCol = 0;\n\n      for (let i = 0; i < state.generatedLabels.length; i++) {\n        const label = state.generatedLabels[i];\n        \n        if (i > 0 && i % labelsPerPage === 0) {\n          pdf.addPage();\n          currentPage++;\n          currentRow = 0;\n          currentCol = 0;\n        }\n\n        // Calculate position\n        const x = margin + currentCol * labelWidthMM;\n        const y = margin + currentRow * labelHeightMM;\n\n        // Create canvas for this label\n        const canvas = document.createElement('canvas');\n        const ctx = canvas.getContext('2d');\n        \n        const dpi = 300;\n        const width = currentSize.width * dpi;\n        const height = currentSize.height * dpi;\n        \n        canvas.width = width;\n        canvas.height = height;\n        \n        // Fill background\n        ctx.fillStyle = 'white';\n        ctx.fillRect(0, 0, width, height);\n        \n        // Generate barcode\n        const barcodeCanvas = document.createElement('canvas');\n        JsBarcode(barcodeCanvas, label.barcode, {\n          format: labelSettings.barcodeType,\n          width: 2,\n          height: height * 0.6,\n          displayValue: true,\n          fontSize: 12,\n          margin: 10\n        });\n        \n        // Draw barcode\n        const barcodeX = (width - barcodeCanvas.width) / 2;\n        const barcodeY = height * 0.1;\n        ctx.drawImage(barcodeCanvas, barcodeX, barcodeY);\n        \n        // Draw text if available\n        if (label.text) {\n          ctx.fillStyle = 'black';\n          ctx.font = '16px Arial';\n          ctx.textAlign = 'center';\n          const textY = height * 0.8;\n          ctx.fillText(label.text, width / 2, textY);\n        }\n        \n        // Convert canvas to image and add to PDF\n        const imgData = canvas.toDataURL('image/png');\n        pdf.addImage(imgData, 'PNG', x, y, labelWidthMM, labelHeightMM);\n\n        // Update position\n        currentCol++;\n        if (currentCol >= labelsPerRow) {\n          currentCol = 0;\n          currentRow++;\n        }\n      }\n\n      pdf.save('barcode_labels.pdf');\n    } catch (error) {\n      actions.setError('Error creating PDF: ' + error.message);\n    } finally {\n      actions.setLoading(false);\n    }\n  };\n\n  const handlePrevious = () => {\n    actions.setStep(4);\n  };\n\n  const handleStartOver = () => {\n    actions.resetApp();\n  };\n\n  return (\n    <div className=\"card\">\n      <div className=\"card-header\">\n        <h2>Step 5: Generate & Export Labels</h2>\n        <p className=\"card-description\">\n          Generate your labels and download in your preferred format\n        </p>\n      </div>\n      <div className=\"card-body\">\n        <div className=\"generation-summary\">\n          <div className=\"summary-card\">\n            <h4>Final Summary</h4>\n            <div className=\"summary-grid\">\n              <div className=\"summary-item\">\n                <span className=\"summary-label\">File:</span>\n                <span className=\"summary-value\">{excelData?.fileName || '-'}</span>\n              </div>\n              <div className=\"summary-item\">\n                <span className=\"summary-label\">Products:</span>\n                <span className=\"summary-value\">{summary.products}</span>\n              </div>\n              <div className=\"summary-item\">\n                <span className=\"summary-label\">Total Labels:</span>\n                <span className=\"summary-value\">{summary.labels}</span>\n              </div>\n              <div className=\"summary-item\">\n                <span className=\"summary-label\">Label Size:</span>\n                <span className=\"summary-value\">{summary.size}</span>\n              </div>\n              <div className=\"summary-item\">\n                <span className=\"summary-label\">Barcode Type:</span>\n                <span className=\"summary-value\">{summary.barcodeType}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"generation-actions\">\n          <button\n            className=\"btn btn-primary btn-large\"\n            onClick={generateLabels}\n            disabled={isGenerating}\n          >\n            <span className=\"btn-icon\">ðŸš€</span>\n            Generate All Labels\n          </button>\n        </div>\n\n        {isGenerating && (\n          <div className=\"generation-progress\">\n            <div className=\"progress-container\">\n              <div className=\"progress-bar\">\n                <div\n                  className=\"progress-fill\"\n                  style={{ width: `${generationProgress}%` }}\n                ></div>\n              </div>\n              <p>Generating labels... {Math.round(generationProgress)}%</p>\n            </div>\n          </div>\n        )}\n\n        {state.generatedLabels.length > 0 && (\n          <div className=\"download-section\">\n            <h4>Download Your Labels</h4>\n            \n            {showPageSizeSelection && (\n              <div className=\"page-size-selection\">\n                <h5>Select Page Size for PDF</h5>\n                <div className=\"page-size-options\">\n                  <div className=\"option-group\">\n                    <input\n                      type=\"radio\"\n                      id=\"page-a4\"\n                      name=\"page-size\"\n                      value=\"a4\"\n                      checked={pageSize === 'a4'}\n                      onChange={(e) => setPageSize(e.target.value)}\n                    />\n                    <label htmlFor=\"page-a4\">\n                      <span className=\"option-title\">A4 (210 Ã— 297 mm)</span>\n                      <span className=\"option-description\">Standard international size</span>\n                    </label>\n                  </div>\n                  <div className=\"option-group\">\n                    <input\n                      type=\"radio\"\n                      id=\"page-letter\"\n                      name=\"page-size\"\n                      value=\"letter\"\n                      checked={pageSize === 'letter'}\n                      onChange={(e) => setPageSize(e.target.value)}\n                    />\n                    <label htmlFor=\"page-letter\">\n                      <span className=\"option-title\">Letter (8.5 Ã— 11 in)</span>\n                      <span className=\"option-description\">Standard US size</span>\n                    </label>\n                  </div>\n                  <div className=\"option-group\">\n                    <input\n                      type=\"radio\"\n                      id=\"page-legal\"\n                      name=\"page-size\"\n                      value=\"legal\"\n                      checked={pageSize === 'legal'}\n                      onChange={(e) => setPageSize(e.target.value)}\n                    />\n                    <label htmlFor=\"page-legal\">\n                      <span className=\"option-title\">Legal (8.5 Ã— 14 in)</span>\n                      <span className=\"option-description\">Extended length</span>\n                    </label>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <div className=\"download-options\">\n              <button\n                className=\"btn btn-primary btn-large\"\n                onClick={downloadZIP}\n                disabled={state.loading}\n              >\n                <span className=\"btn-icon\">ðŸ“¦</span>\n                Download ZIP\n                <span className=\"btn-description\">Individual label images</span>\n              </button>\n              <button\n                className=\"btn btn-secondary btn-large\"\n                onClick={() => {\n                  setShowPageSizeSelection(!showPageSizeSelection);\n                  if (!showPageSizeSelection) {\n                    setTimeout(downloadPDF, 100);\n                  }\n                }}\n                disabled={state.loading}\n              >\n                <span className=\"btn-icon\">ðŸ“„</span>\n                Download PDF\n                <span className=\"btn-description\">Print-ready labels in PDF format</span>\n              </button>\n            </div>\n            <div className=\"download-info\">\n              <p><strong>ZIP Format:</strong> Contains individual high-resolution label images for custom printing or integration.</p>\n              <p><strong>PDF Format:</strong> Optimized for printing with proper margins and cut lines. Compatible with Avery label sheets.</p>\n            </div>\n          </div>\n        )}\n\n        <div className=\"step-actions\">\n          <button className=\"btn btn-outline\" onClick={handlePrevious}>\n            Previous\n          </button>\n          <button className=\"btn btn-secondary\" onClick={handleStartOver}>\n            Start Over\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Generation;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}